<app-header></app-header>

<div class="profile-container">
  <div class="welcome">
    <div class="image" matRipple>
      <img src="/assets/images/profile.svg" class="image" alt=""/>
    </div>
    <div class="welcome-text">
      <div class="hello">
        {{currentUser.username}}
      </div>
    </div>
    {{currentUser.email}}
  </div>
  <div class="name-container" [formGroup]="profileForm">
    <mat-form-field class="name">
      <mat-label>Name</mat-label>
      <input matInput #nameInput maxlength="50" formControlName="name"
             [ngClass]="{'warn': name.invalid && (name.dirty || name.touched)}"
             matTooltip="change text to save">
      <mat-hint align="end">{{nameInput.value.length}} / 50</mat-hint>
    </mat-form-field>
    <div *ngIf="name.invalid && (name.dirty || name.touched)"
         class="validation-error-message">
      <div *ngIf="name.errors.required">
        Name is required
      </div>
      <div *ngIf="name.errors.min">
        Name should have at least 3 characters
      </div>
    </div>

    <mat-form-field class="password">
      <mat-label>Password</mat-label>
      <input matInput #passwordInput maxlength="30" formControlName="password" type="password"
             [ngClass]="{'warn': password.invalid && (password.dirty || password.touched)}"
             matTooltip="change text to save">
      <mat-hint align="end">{{passwordInput.value.length}} / 30</mat-hint>
    </mat-form-field>
    <div *ngIf="password.invalid && (password.dirty || password.touched)"
         class="validation-error-message">
      <div *ngIf="password.errors.required">
        Password is required
      </div>
      <div *ngIf="password.errors.min">
        Password should have at least 4 characters
      </div>
    </div>

    <mat-form-field class="password">
      <mat-label>Confirm password</mat-label>
      <input matInput #passwordInput maxlength="30" formControlName="confirmPassword" type="password"
             [ngClass]="{'warn': confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)}"
             matTooltip="change text to save">
      <mat-hint align="end">{{passwordInput.value.length}} / 30</mat-hint>
    </mat-form-field>
    <div *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)"
         class="validation-error-message">
      <div *ngIf="confirmPassword.errors.required">
        Confirm password is required
      </div>
    </div>
    <div class="validation-error-message"
         *ngIf="confirmPassword.valid && confirmPassword.value != password.value">
      Password and confirm password are mismatched
    </div>

    <div class="save">
      <a (click)="saveProfileInfo()" class="save-btn">Save</a>
    </div>
  </div>
</div>
